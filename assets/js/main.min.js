function newsSlider(){window.innerWidth<700&&getObj("news.json",function(e){slider(e,"newsBlock","news")})}function close(e){$(e).css({visibility:"hidden",width:"0%",height:"0%",top:"0%"}),$("body").css({overflow:"visible"})}function open(e,t){$(e).css({visibility:"visible",top:t}).animate({width:"100%",height:"100vh"},400),$("body").css({overflow:"hidden"})}function proveraRegister(){var e=[];document.getElementById("registerErrorsBlock").innerHTML="";var t=document.getElementById("fullName"),n=document.getElementById("usernameRegister"),o=document.getElementById("emailRegister"),i=document.getElementById("passwordRegister"),s=document.getElementById("passwordConfirm"),r=t.value.trim(),l=n.value.trim(),c=o.value.trim(),a=i.value,d=s.value;if(valid=!0,/^[A-Z][a-z]{2,20}(\s[A-Z][a-z]{2,20})+$/.test(r)?t.style.borderBottom="2px solid green":(t.style.borderBottom="2px solid #cf2525",e.push('<div class="error"\t><p>Name at least two capitalized words, space in between.</p></div>'),valid=!1),/^(?=.*[A-z])(?!\s)[A-z\d.?-]{3,25}$/.test(l)?n.style.borderBottom="2px solid green":(e.push('<div class="error"\t><p>Username between 3 and 25 characters.</p></div>'),n.style.borderBottom="2px solid #cf2525",valid=!1),/^([A-z][A-z0-9-._]{2,35})\@([A-z]{3,10}\.[a-z]{2,5}(.[a-z]{2,5})?)$/.test(c)?o.style.borderBottom="2px solid green":(e.push('<div class="error"\t><p>Regular email shape.</p></div>'),o.style.borderBottom="2px solid #cf2525",valid=!1),/^(?=.*[a-z])(?=.*\d)(?=.*[A-Z]).{3,30}$/.test(a)?i.style.borderBottom="2px solid green":(e.push('<div class="error"\t><p>Pass one uppercase,lowercase letter and number</p></div>'),i.style.borderBottom="2px solid #cf2525",valid=!1),a!=d||""==d?(e.push('<div class="error"\t><p>Passwords must match.</p></div>'),s.style.borderBottom="2px solid #cf2525",valid=!1):s.style.borderBottom="2px solid green",valid)localStorage.setItem("username",l),location.reload();else for(element of e)document.getElementById("registerErrorsBlock").innerHTML+=element}function proveraSignIn(){var e=[],t=document.getElementById("usernameSignIn"),n=document.getElementById("passwordSignIn"),o=t.value.trim(),i=n.value;if(valid=!0,/^(?=.*[A-z])(?!\s)[A-z\d.?-]{3,25}$/.test(o)?t.style.borderBottom="2px solid green":(t.style.borderBottom="2px solid #cf2525",e.push('<div class="error"\t><p>Username between 3 and 25 characters.</p></div>'),valid=!1),/^(?=.*[a-z])(?=.*\d)(?=.*[A-Z]).{3,30}$/.test(i)?n.style.borderBottom="2px solid green":(n.style.borderBottom="2px solid #cf2525",e.push('<div class="error"><p>Password one uppercase,lowercase letter and number.</p></div>'),valid=!1),valid)localStorage.setItem("username",o),location.reload();else for(element of e)document.getElementById("signInErrorsBlock").innerHTML+=element}function writeUsernameBlock(){localStorage.getItem("username")?(document.getElementById("account").innerHTML=`\n\t\t\t<li id='user'>${localStorage.getItem("username")}&nbsp;&nbsp;<i class="fas fa-chevron-down"></i>\n\t\t\t\t<ul id='signOutBlock'>\n\t\t\t\t\t<li><a id='signOut'href='index.html'>Sign Out</a></li>\n\t\t\t\t<ul>\n\t\t\t</li>`,document.getElementById("signOut").addEventListener("click",function(){localStorage.clear()}),$("#user").hover(function(){$("#signOutBlock").css({display:"flex"})},function(){$("#signOutBlock").css({display:"none"})})):document.getElementById("account").innerHTML='\n\t\t<li></li>\n\t\t<li><a class="signIn" href="#">sign in</a></li>'}function proveraContact(){document.getElementById("contactError").innerHTML="",valid=!0;var e=[],t=document.getElementById("fullNameContact"),n=document.getElementById("subjectContact"),o=document.getElementById("messageContact"),s=t.value,r=n.value,l=o.value;console.log(l);if(/^[A-Z][a-z]{2,20}(\s[A-Z][a-z]{2,20})+$/.test(s)?t.style.borderBottom="2px solid black":(t.style.borderBottom="2px solid #cf2525",e.push('<div class="error"><p>Name nn invalid format.</p></div>'),valid=!1),/^[\w\d]{1,30}$/.test(r)?n.style.borderBottom="2px solid black":(n.style.borderBottom="2px solid #cf2525",e.push('<div class="error"><p>Subject in invalid format.</p></div>'),valid=!1),/^.{5,250}$/.test(l)?o.style.borderBottom="2px solid black":(o.style.borderBottom="2px solid #cf2525",e.push('<div class="error"><p>Message max 250 characters.</p></div>'),valid=!1),e)for(i=0;i<e.length;i++)document.getElementById("contactError").innerHTML+=e[i];return valid}function showMenu(){var e=$("#navSmall ul");"none"==e.css("display")?e.css({display:"flex"}):e.css({display:"none"})}function slider(e,t,n){var o="",s=-1;for(element of e)o+='\n\t\t\t<div class="indexSliderMovie">\n\t\t\t\t<img src="img/'+n+`/${element.photo.source}" alt="${element.photo.source}"/>\n\t\t\t\t<div>\n\t\t\t\t\t<a href="#"><h3>${element.title}</h3></a>\n\t\t\t\t\t<p>`,element.description&&(o+=element.description),o+="</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t";!function e(){document.getElementById(t).innerHTML=o;var n=document.getElementsByClassName("indexSliderMovie");s++;for(i=0;i<n.length;i++)n[i].classList.add("displayNone");s==n.length&&(s=0);n[s].classList.add("displayBlock");setTimeout(e,4e3)}()}function reviewsAjax(){getObj("reviews.json",function(e){writeReviews(e)})}function writeReviews(e){let t="";for(element of e){t+=`\n\t\t\t<div class="review">\n\t\t\t\t<div>\n\t\t\t\t\t<img src="img/movies/${element.photo.source}" alt="${element.alt}"/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h4>${element.filmTitle}</h4>\n\t\t\t\t\t<a id="name" href="#">${element.name}</a>\n\t\t\t\t\t<p id="text">`;if(element.text.length>290)t+=`${element.text.substring(0,290)}<span class="more-text">${element.text.substring(290,element.text.length)}</span>\n\t\t\t\t\t\t\t\t<a href="#" class="showMore">...see more</a>`;else t+=`${element.text}`;t+=`\n\t\t\t\t</p>\n\t\t\t\t<p id="time">${element.time}</p>\n\t\t\t</div>\n\t\t</div>`}document.getElementById("reviewBlock").innerHTML=t,$(".showMore").click(function(e){e.preventDefault(),showMore($(this))})}function showMore(e){console.log(e.prev()),"inline"!=e.prev().css("display")?(e.prev().show(100),e[0].textContent="see less"):(e.prev().hide(100),e[0].textContent="...see more")}function topReviewsAjax(){getObj("topReviewers.json",function(e){writeTopReviewers(e)})}function writeTopReviewers(e){let t="";for(element of e)t+=`<div class="userIcon">\n\t\t\t\t<img src="img/users/${element.profilePhoto.source}" alt="${element.profilePhoto.alt}"/>\n\t\t\t\t<div>\n\t\t\t\t\t<h5>${element.username}</h5>\n\t\t\t\t\t<p>${element.reviews}&nbsp;reviews</p>\n\t\t\t\t</div>\n\t\t\t</div>`;document.getElementById("topReviewersBlock").innerHTML=t}function newsAjax(){getObj("news.json",function(e){writeNews(e)})}function writeNews(e){let t="";for(element of e)t+=`\n\t\t<div class="news">\n\t\t\t<a href="#"><img src="img/news/${element.photo.source}" alt="${element.photo.alt}"/></a>\n\t\t\t<div>\n\t\t\t\t<a href="#"><h3>${element.title}</h3></a>\n\t\t\t\t<p>${element.description}</p>\n\t\t\t</div>\n\t\t</div>`;document.getElementById("newsBlock").innerHTML=t}function topMoviesAjax(){getObj("topMovies.json",function(e){slider(e,"topMoviesBlock","movies")})}function moviesAjax(){getObj("movies.json",function(e){writeMovies(e)})}function writeMovies(e){let t="";for(element of e)t+=movieBlock();document.getElementById("moviesBlock").innerHTML=t,$(".movie").click(function(){writeInfo($(this).attr("data-id"))})}function movieBlock(){return`\n\t\t\t<div class="movie" data-id="${element.id}">\n\t\t\t\t<img src="img/movies/${element.photo.source}" alt="${element.photo.alt}"/>\n\t\t\t</div>\n\t\t`}function getObj(e,t){$.ajax({url:"assets/data/"+e,method:"GET",type:"json",success:t,error(e,t,n){console.log(e),console.log(t),console.log(n)}})}function sortMovies(){var e=[],t=this.value;getObj("movies.json",function(n){e=n,"newest"==t&&(e.sort((e,t)=>t.year-e.year),writeMovies(e)),"oldest"==t&&(e.sort((e,t)=>e.year-t.year),writeMovies(e)),"0"==t&&(e.sort((e,t)=>e.id-t.id),writeMovies(e))})}function filterMovies(){var e=this.value;getObj("movies.json",function(t){movies=t,"0"==e?writeMovies(movies):(movies=movies.filter(function(t){for(genre of t.genres)if(genre==e)return!0}),writeMovies(movies))})}function writeInfo(e){var t=[];getObj("movies.json",function(n){for(element of n)if(element.id==e){t=element;break}let o="";for(crewMember of(o+=`\n\t\t\t<div class="infoMovie">\n\t\t\t\t<div class="close" id="infoClose">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</div>\n\t\t\t\t<div id="infoDesc">\n\t\t\t\t\t<h2>${t.title}&nbsp;&nbsp;&nbsp;&nbsp;${t.year}</h2>\n\t\t\t\t\t<p>${t.synopsis}<br/><br/>${t.length}</p>`,localStorage.getItem("username")?o+='<div class="watchlistIcon" id="addToWatchlist"><p>Add to your watchlist</p></div>':o+='<div class="watchlistIcon"><a href="#" class="signIn">Please sign in to add to your watchlist</a></div>',o+='\n\t\t\t\t\t<div class="crewBlock">\n\t\t\t\t\t\t<ul id="directorsInfo">',1==element.crew.directors.length?o+="<p>Director<hr/></p>":o+="<p>Directors<hr/></p>",element.crew.directors))o+=`<li>${crewMember}</li>`;for(crewMember of(o+='</ul>\n\t\t\t\t\t\t<ul id="producersInfo">',1==element.crew.producers.length?o+="<p>Producer<hr/></p>":o+="<p>Producers<hr/></p>",element.crew.producers))o+=`<li>${crewMember}</li>`;for(crewMember of(o+='</ul>\n\t\t\t\t\t\t<ul id="writersInfo">',1==element.crew.producers.length?o+="<p>Writer<hr/></p>":o+="<p>Writers<hr/></p>",element.crew.writers))o+=`<li>${crewMember}</li>`;for(crewMember of(o+='</ul>\n\t\t\t\t\t\t<ul id="cinematographyInfo"><p>Cinematography<hr/></p>',element.crew.cinematography))o+=`<li>${crewMember}</li>`;o+=`</ul></div>\n\t\t\t\t</div>\n\t\t\t\t<div id="infoPhoto"><img src="img/movies/${t.photo.source}" alt="${t.photo.alt}"/></div>\n\t\t\t</div>\n\t\t`,document.getElementById("infoBlock").innerHTML=o,open("#infoBlock",$(window).scrollTop()),$(".signIn").click(function(){open("#signInBlock",0)}),$("#infoClose").click(function(){close("#infoBlock")}).hover(function(){$(this).children().first().stop(!0,!0).animate({height:"23px"},300),$(this).children().last().stop(!0,!0).animate({height:"30px"},300)},function(){$(this).children().first().stop(!0,!0).animate({height:"29px"},300),$(this).children().last().stop(!0,!0).animate({height:"25px"},300)}),$("#addToWatchlist").click(function(){addToWatchlist(e)})})}function getGenres(){getObj("genres.json",function(e){writeGenres(e)})}function writeGenres(e){let t="";for(element of(t+="<option value='0'>Choose Movie</option>",broj=0,e))broj++,t+=`<option value="${broj}">${element.name}</option>`;document.getElementById("genreSelect").innerHTML=t}function reviewProvera(){document.getElementById("addReviewErrorsBlock").innerHTML="";var e=[],t=document.getElementById("genreSelect"),n=document.getElementById("reviewText"),o=t.value,i=n.value.trim();if(/^.{1,500}$/.test(i)?n.style.border="2px solid #383838":(n.style.border="2px solid #cf2525",e.push("<div class='error'><p>Text between 1 and 500 characters</p></div>"),valid=!1),0==o?(t.style.borderBottom="2px solid #cf2525",e.push("<div class='error'><p>Genre must be chosen</p></div>"),valid=!1):t.style.borderBottom="2px solid #383838",!(e.length>0))return document.getElementById("addReviewErrorsBlock").innerHTML="",valid;for(element of e)return document.getElementById("addReviewErrorsBlock").innerHTML+=element,valid}function getWatchlistMovies(){return JSON.parse(localStorage.getItem("watchlist"))}function addFirstMovieWatchlist(e){let t=[];t[0]={id:e},alert("Added to your watchlist!"),localStorage.setItem("watchlist",JSON.stringify(t))}function addToWatchlist(e){if(localStorage.getItem("watchlist")){for(element of(watchlist=getWatchlistMovies(),watchlist))if(element.id==e){alert("Movie already in watchlist");var t=1;break}if(!t){var n={id:e};watchlist.push(n),localStorage.setItem("watchlist",JSON.stringify(watchlist)),alert("Added to your watchlist!")}}else addFirstMovieWatchlist(e)}function writeWatchlist(){let e=getWatchlistMovies();if(e)getObj("movies.json",function(t){let n="",o=[];for(element of e)for(mov of t)if(element.id==mov.id){o.push(mov);break}for(element of o)n+=`\n\t\t\t\t\t<div class="watchlistMovie" data-id="${element.id}">\n\t\t\t\t\t\t<img src="img/movies/${element.photo.source}" alt="${element.photo.alt}"/>\n\t\t\t\t\t\t<div class="remove">\n\t\t\t\t\t\t\t<div class="removeFromWatchlist close" data-id="${element.id}"><span></span><span></span></div>\n\t\t\t\t\t\t\t<p>&nbsp;remove from watchlist</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>`;document.getElementById("watchlistBlock").innerHTML=n,$(".removeFromWatchlist").click(function(){removeFromWatchlist($(this).attr("data-id"))})});else{let e='<div id="watchlistEmpty">\n\t\t\t<h4>HOW TO ADD</h4>\n\t\t\t<p>Add films you want to see to your watchlist from the\n\t\t icon on each film poster. Click <a href="movies.html">here</a> to choose movies!</p>\n\t\t<div>';document.getElementById("watchlistBlock").innerHTML=e}}function removeFromWatchlist(e){let t=getWatchlistMovies();0==(t=t.filter(t=>t.id!=e)).length?(localStorage.removeItem("watchlist"),location.reload()):(localStorage.setItem("watchlist",JSON.stringify(t)),location.reload())}function searchMovies(){var e=$("#searchInput").val().toLowerCase();getObj("movies.json",function(t){var n=t,o=[];for(element of n)-1!=element.title.toLowerCase().indexOf(e)&&o.push(element);0==o.length?document.getElementById("moviesBlock").innerHTML="<p class='error'>Sorry, we couldn't find any matches.</p>":writeMovies(o)})}$(document).ready(function(){writeUsernameBlock(),$(".signIn").click(function(){open("#signInBlock",0)}),$(".register").click(function(){open("#registerBlock",0)}),$(".formClose").click(function(){close("#signInBlock, #registerBlock")}).hover(function(){$(this).css({cursor:"pointer"})});var e=window.location.href;-1==e.indexOf("index.html")&&"https://reddy.netlify.com/"!=e||(reviewsAjax(),newsAjax(),topReviewsAjax(),newsSlider()),-1!=e.indexOf("reviews.html")&&(reviewsAjax(),$("#addReview").click(function(){open("#addReviewBlock",$(window).scrollTop())}),$(".formClose").click(function(){close("#addReviewBlock")}),getGenres(),$("#submitReview").click(function(){reviewProvera()})),-1!=e.indexOf("movies.html")&&(topMoviesAjax(),moviesAjax(),document.getElementById("sortMovies").addEventListener("change",sortMovies),document.getElementById("filterMovies").addEventListener("change",filterMovies),document.getElementById("searchMovies").addEventListener("click",function(e){e.preventDefault(),searchMovies()}),document.getElementById("searchInput").addEventListener("keyup",function(e){13==e.keyCode&&searchMovies()})),-1!=e.indexOf("watchlist.html")&&writeWatchlist(),$(".close").hover(function(){$(this).children().first().stop(!0,!0).animate({height:"23px"},300),$(this).children().last().stop(!0,!0).animate({height:"30px"},300)},function(){$(this).children().first().stop(!0,!0).animate({height:"29px"},300),$(this).children().last().stop(!0,!0).animate({height:"25px"},300)}),document.getElementById("navSmall").addEventListener("click",showMenu),document.getElementById("dugmeRegister").addEventListener("click",proveraRegister),document.getElementById("dugmeSignIn").addEventListener("click",proveraSignIn)});